{"version":3,"file":"imageGeneration.js","sources":["api/imageGeneration.js"],"sourcesContent":["import request, { BASE_URL } from '@/utils/request'\r\n\r\nexport const imageGenerationApi = {\r\n  // 文生图\r\n  textToImage(data) {\r\n    return request({\r\n      url: '/image-generation/text-to-image',\r\n      method: 'POST',\r\n      data\r\n    })\r\n  },\r\n  \r\n  // 上传图片\r\n  uploadImage(filePath) {\r\n    return new Promise((resolve, reject) => {\r\n      const token = uni.getStorageSync('token')\r\n      \r\n      uni.uploadFile({\r\n        url: BASE_URL + '/image-generation/upload',\r\n        filePath: filePath,\r\n        name: 'file',\r\n        header: {\r\n          'Authorization': token ? `Bearer ${token}` : ''\r\n        },\r\n        success: (res) => {\r\n          try {\r\n            const data = JSON.parse(res.data)\r\n            if (data.code === 200) {\r\n              resolve(data)\r\n            } else {\r\n              uni.showToast({\r\n                title: data.message || '上传失败',\r\n                icon: 'none'\r\n              })\r\n              reject(data)\r\n            }\r\n          } catch (e) {\r\n            console.error('解析响应失败', e)\r\n            reject(res)\r\n          }\r\n        },\r\n        fail: (err) => {\r\n          uni.showToast({\r\n            title: '上传失败',\r\n            icon: 'none'\r\n          })\r\n          reject(err)\r\n        }\r\n      })\r\n    })\r\n  },\r\n  \r\n  // 图生图\r\n  imageToImage(data) {\r\n    return request({\r\n      url: '/image-generation/image-to-image',\r\n      method: 'POST',\r\n      data\r\n    })\r\n  },\r\n  \r\n  // 查询生成任务状态\r\n  getTaskStatus(taskId) {\r\n    return request({\r\n      url: `/image-generation/tasks/${taskId}`,\r\n      method: 'GET'\r\n    })\r\n  }\r\n}\r\n\r\n\r\n"],"names":["request","uni","BASE_URL"],"mappings":";;;AAEY,MAAC,qBAAqB;AAAA;AAAA,EAEhC,YAAY,MAAM;AAChB,WAAOA,sBAAQ;AAAA,MACb,KAAK;AAAA,MACL,QAAQ;AAAA,MACR;AAAA,IACN,CAAK;AAAA,EACF;AAAA;AAAA,EAGD,YAAY,UAAU;AACpB,WAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtC,YAAM,QAAQC,cAAAA,MAAI,eAAe,OAAO;AAExCA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAKC,cAAQ,WAAG;AAAA,QAChB;AAAA,QACA,MAAM;AAAA,QACN,QAAQ;AAAA,UACN,iBAAiB,QAAQ,UAAU,KAAK,KAAK;AAAA,QAC9C;AAAA,QACD,SAAS,CAAC,QAAQ;AAChB,cAAI;AACF,kBAAM,OAAO,KAAK,MAAM,IAAI,IAAI;AAChC,gBAAI,KAAK,SAAS,KAAK;AACrB,sBAAQ,IAAI;AAAA,YAC1B,OAAmB;AACLD,4BAAAA,MAAI,UAAU;AAAA,gBACZ,OAAO,KAAK,WAAW;AAAA,gBACvB,MAAM;AAAA,cACtB,CAAe;AACD,qBAAO,IAAI;AAAA,YACZ;AAAA,UACF,SAAQ,GAAG;AACVA,0BAAAA,MAAA,MAAA,SAAA,gCAAc,UAAU,CAAC;AACzB,mBAAO,GAAG;AAAA,UACX;AAAA,QACF;AAAA,QACD,MAAM,CAAC,QAAQ;AACbA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,UAClB,CAAW;AACD,iBAAO,GAAG;AAAA,QACX;AAAA,MACT,CAAO;AAAA,IACP,CAAK;AAAA,EACF;AAAA;AAAA,EAGD,aAAa,MAAM;AACjB,WAAOD,sBAAQ;AAAA,MACb,KAAK;AAAA,MACL,QAAQ;AAAA,MACR;AAAA,IACN,CAAK;AAAA,EACF;AAAA;AAAA,EAGD,cAAc,QAAQ;AACpB,WAAOA,sBAAQ;AAAA,MACb,KAAK,2BAA2B,MAAM;AAAA,MACtC,QAAQ;AAAA,IACd,CAAK;AAAA,EACF;AACH;;"}