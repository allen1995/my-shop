{"version":3,"file":"detail.js","sources":["pages/works/detail.vue","../../../software/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvd29ya3MvZGV0YWlsLnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"detail-container\">\r\n    <view class=\"image-section\">\r\n      <image class=\"work-image\" :src=\"work.imageUrl\" mode=\"aspectFit\" @click=\"previewImage\"></image>\r\n    </view>\r\n    \r\n    <view class=\"info-section\">\r\n      <text class=\"work-title\">{{ work.title }}</text>\r\n      <text class=\"work-description\" v-if=\"work.description\">{{ work.description }}</text>\r\n      \r\n      <view class=\"category-section\">\r\n        <view class=\"category-title\">分类</view>\r\n        <view class=\"category-content\">\r\n          <text class=\"category-value\" v-if=\"work.category\">{{ work.category }}</text>\r\n          <text class=\"category-placeholder\" v-else>未设置分类</text>\r\n          <text class=\"category-edit-btn\" @click=\"showCategoryModal\">编辑</text>\r\n        </view>\r\n      </view>\r\n      \r\n      <view class=\"tags-section\" v-if=\"tags.length > 0 || editingTags\">\r\n        <view class=\"tags-title\">标签</view>\r\n        <view class=\"tags-list\">\r\n          <view \r\n            class=\"tag-item\" \r\n            v-for=\"(tag, index) in tags\" \r\n            :key=\"index\"\r\n          >\r\n            <text>{{ tag }}</text>\r\n            <text class=\"tag-remove\" @click=\"removeTag(tag)\" v-if=\"editingTags\">×</text>\r\n          </view>\r\n          <view class=\"tag-item add-tag\" @click=\"showAddTagModal\" v-if=\"editingTags\">\r\n            <text>+ 添加</text>\r\n          </view>\r\n        </view>\r\n        <view class=\"tags-actions\">\r\n          <text class=\"tags-edit-btn\" @click=\"toggleEditTags\">\r\n            {{ editingTags ? '完成' : '编辑标签' }}\r\n          </text>\r\n        </view>\r\n      </view>\r\n      \r\n      <text class=\"work-time\">创建时间：{{ formatTime(work.createTime) }}</text>\r\n    </view>\r\n    \r\n    <view class=\"action-section\">\r\n      <button class=\"action-btn favorite-btn\" :class=\"{ active: work.isFavorite }\" @click=\"handleToggleFavorite\">\r\n        {{ work.isFavorite ? '⭐ 已收藏' : '☆ 收藏' }}\r\n      </button>\r\n      <button class=\"action-btn share-btn\" @click=\"handleShare\">分享作品</button>\r\n      <button class=\"action-btn apply-btn\" @click=\"handleApply\">应用到包包</button>\r\n      <button class=\"action-btn delete-btn\" @click=\"handleDelete\">删除作品</button>\r\n    </view>\r\n    \r\n    <!-- 隐藏的Canvas用于生成海报 -->\r\n    <canvas \r\n      canvas-id=\"share-poster-canvas\" \r\n      :style=\"{ width: '750px', height: '1334px', position: 'fixed', left: '-9999px', top: '-9999px' }\"\r\n    ></canvas>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport { workApi } from '@/api/work'\r\nimport { onLoad, onShow } from '@dcloudio/uni-app'\r\nimport { generatePoster, savePosterToAlbum } from '@/utils/poster'\r\n\r\nconst work = ref({})\r\nconst workId = ref(null)\r\nconst tags = ref([])\r\nconst editingTags = ref(false)\r\nconst allCategories = ref([]) // 所有分类列表\r\n\r\nonLoad(async (options) => {\r\n  workId.value = options.id\r\n  await loadWorkDetail()\r\n  // 不在页面加载时加载分类列表，避免超时\r\n  // 分类列表将在用户点击\"编辑分类\"时按需加载\r\n})\r\n\r\nconst loadWorkDetail = async () => {\r\n  try {\r\n    const res = await workApi.getWorkDetail(workId.value)\r\n    if (res.code === 200 && res.data) {\r\n      work.value = res.data\r\n      // 解析tags JSON字符串\r\n      if (work.value.tags) {\r\n        try {\r\n          tags.value = JSON.parse(work.value.tags)\r\n        } catch (e) {\r\n          tags.value = []\r\n        }\r\n      } else {\r\n        tags.value = []\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error('加载作品详情失败', error)\r\n  }\r\n}\r\n\r\n// 加载所有分类（与作品集页面使用相同的数据源）\r\n// 优化：使用分页加载，避免一次性加载过多数据\r\nconst loadAllCategories = async () => {\r\n  try {\r\n    const catSet = new Set()\r\n    let page = 0\r\n    const size = 50 // 每次加载50条，减少单次请求数据量\r\n    let hasMore = true\r\n    \r\n    // 分页加载所有作品以提取分类\r\n    while (hasMore) {\r\n      const res = await workApi.getWorks({ page, size })\r\n      if (res.code === 200 && res.data) {\r\n        const worksList = res.data.content || []\r\n        worksList.forEach(w => {\r\n          if (w.category) {\r\n            catSet.add(w.category)\r\n          }\r\n        })\r\n        \r\n        // 检查是否还有更多数据\r\n        hasMore = !res.data.last && worksList.length === size\r\n        page++\r\n      } else {\r\n        hasMore = false\r\n      }\r\n    }\r\n    \r\n    allCategories.value = Array.from(catSet).sort()\r\n    console.log('加载所有分类:', allCategories.value)\r\n  } catch (error) {\r\n    console.error('加载分类列表失败', error)\r\n    throw error // 抛出错误，让调用方处理\r\n  }\r\n}\r\n\r\nconst toggleEditTags = () => {\r\n  editingTags.value = !editingTags.value\r\n}\r\n\r\nconst showCategoryModal = async () => {\r\n  // 如果分类列表为空，先加载分类列表\r\n  if (allCategories.value.length === 0) {\r\n    uni.showLoading({ title: '加载分类中...' })\r\n    try {\r\n      await loadAllCategories()\r\n    } catch (error) {\r\n      console.error('加载分类列表失败', error)\r\n      uni.hideLoading()\r\n      uni.showToast({\r\n        title: '加载分类失败',\r\n        icon: 'none'\r\n      })\r\n      return\r\n    }\r\n    uni.hideLoading()\r\n  }\r\n  \r\n  // 构建操作列表：已有分类 + 自定义分类 + 清除分类\r\n  const actionList = [...allCategories.value]\r\n  actionList.push('+ 自定义分类')\r\n  if (work.value.category) {\r\n    actionList.push('清除分类')\r\n  }\r\n  \r\n  uni.showActionSheet({\r\n    itemList: actionList,\r\n    success: async (res) => {\r\n      const selectedIndex = res.tapIndex\r\n      let newCategory = null\r\n      \r\n      // 如果选择的是已有分类\r\n      if (selectedIndex < allCategories.value.length) {\r\n        newCategory = allCategories.value[selectedIndex]\r\n      } \r\n      // 如果选择的是\"自定义分类\"\r\n      else if (actionList[selectedIndex] === '+ 自定义分类') {\r\n        // 弹出输入框\r\n        uni.showModal({\r\n          title: '自定义分类',\r\n          editable: true,\r\n          placeholderText: '请输入分类名称',\r\n          success: async (modalRes) => {\r\n            if (modalRes.confirm && modalRes.content && modalRes.content.trim()) {\r\n              const customCategory = modalRes.content.trim()\r\n              await updateCategory(customCategory)\r\n            }\r\n          }\r\n        })\r\n        return\r\n      }\r\n      // 如果选择的是\"清除分类\"\r\n      else if (actionList[selectedIndex] === '清除分类') {\r\n        newCategory = null\r\n      }\r\n      \r\n      if (newCategory !== undefined) {\r\n        await updateCategory(newCategory)\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nconst updateCategory = async (category) => {\r\n  try {\r\n    const updateRes = await workApi.updateCategory(workId.value, category)\r\n    if (updateRes.code === 200 && updateRes.data) {\r\n      work.value = updateRes.data\r\n      \r\n      // 重新加载所有分类，确保与作品集页面数据一致\r\n      await loadAllCategories()\r\n      \r\n      uni.showToast({\r\n        title: category ? '分类设置成功' : '分类已清除',\r\n        icon: 'success',\r\n        duration: 1000\r\n      })\r\n    } else {\r\n      uni.showToast({\r\n        title: updateRes.message || '设置分类失败',\r\n        icon: 'none'\r\n      })\r\n    }\r\n  } catch (error) {\r\n    console.error('设置分类失败', error)\r\n    uni.showToast({\r\n      title: '设置分类失败',\r\n      icon: 'none'\r\n    })\r\n  }\r\n}\r\n\r\nonShow(() => {\r\n  // 从其他页面返回时，重新加载作品详情（分类列表按需加载）\r\n  if (workId.value) {\r\n    loadWorkDetail()\r\n  }\r\n})\r\n\r\nconst showAddTagModal = () => {\r\n  uni.showModal({\r\n    title: '添加标签',\r\n    editable: true,\r\n    placeholderText: '请输入标签名称',\r\n    success: async (res) => {\r\n      if (res.confirm && res.content && res.content.trim()) {\r\n        const newTag = res.content.trim()\r\n        if (!tags.value.includes(newTag)) {\r\n          try {\r\n            const addRes = await workApi.addTag(workId.value, newTag)\r\n            if (addRes.code === 200) {\r\n              tags.value.push(newTag)\r\n              work.value = addRes.data\r\n            }\r\n          } catch (error) {\r\n            uni.showToast({\r\n              title: '添加标签失败',\r\n              icon: 'none'\r\n            })\r\n          }\r\n        } else {\r\n          uni.showToast({\r\n            title: '标签已存在',\r\n            icon: 'none'\r\n          })\r\n        }\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nconst removeTag = async (tag) => {\r\n  try {\r\n    const res = await workApi.removeTag(workId.value, tag)\r\n    if (res.code === 200) {\r\n      tags.value = tags.value.filter(t => t !== tag)\r\n      work.value = res.data\r\n    }\r\n  } catch (error) {\r\n    uni.showToast({\r\n      title: '删除标签失败',\r\n      icon: 'none'\r\n    })\r\n  }\r\n}\r\n\r\nconst previewImage = () => {\r\n  uni.previewImage({\r\n    urls: [work.value.imageUrl],\r\n    current: work.value.imageUrl\r\n  })\r\n}\r\n\r\nconst handleApply = () => {\r\n  uni.navigateTo({\r\n    url: `/pages/preview/preview?workId=${workId.value}&imageUrl=${encodeURIComponent(work.value.imageUrl)}`\r\n  })\r\n}\r\n\r\nconst handleToggleFavorite = async () => {\r\n  try {\r\n    const res = await workApi.toggleFavorite(workId.value)\r\n    if (res.code === 200 && res.data) {\r\n      work.value.isFavorite = res.data.isFavorite\r\n      uni.showToast({\r\n        title: work.value.isFavorite ? '已收藏' : '已取消收藏',\r\n        icon: 'success',\r\n        duration: 1000\r\n      })\r\n    }\r\n  } catch (error) {\r\n    uni.showToast({\r\n      title: '操作失败',\r\n      icon: 'none'\r\n    })\r\n  }\r\n}\r\n\r\nconst handleDelete = () => {\r\n  uni.showModal({\r\n    title: '确认删除',\r\n    content: '确定要删除这个作品吗？',\r\n    success: async (res) => {\r\n      if (res.confirm) {\r\n        try {\r\n          const deleteRes = await workApi.deleteWork(workId.value)\r\n          if (deleteRes.code === 200) {\r\n            uni.showToast({\r\n              title: '删除成功',\r\n              icon: 'success'\r\n            })\r\n            \r\n            setTimeout(() => {\r\n              uni.navigateBack()\r\n            }, 1500)\r\n          }\r\n        } catch (error) {\r\n          uni.showToast({\r\n            title: '删除失败',\r\n            icon: 'none'\r\n          })\r\n        }\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nconst handleShare = () => {\r\n  uni.showActionSheet({\r\n    itemList: ['分享到微信好友', '分享到朋友圈', '生成分享海报', '保存海报到相册'],\r\n    success: async (res) => {\r\n      if (res.tapIndex === 0) {\r\n        // 分享到微信好友\r\n        shareToWeChat('session')\r\n      } else if (res.tapIndex === 1) {\r\n        // 分享到朋友圈\r\n        shareToWeChat('timeline')\r\n      } else if (res.tapIndex === 2) {\r\n        // 生成分享海报\r\n        await generateSharePoster()\r\n      } else if (res.tapIndex === 3) {\r\n        // 保存海报到相册\r\n        await saveSharePoster()\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nconst shareToWeChat = (scene) => {\r\n  // 微信分享配置\r\n  const shareUrl = `/pages/works/detail?id=${workId.value}`\r\n  const shareTitle = work.value.title || '我的AI作品'\r\n  const shareImageUrl = work.value.imageUrl\r\n  \r\n  // 调用微信分享API\r\n  // 注意：需要在页面onLoad时设置分享配置\r\n  uni.showShareMenu({\r\n    withShareTicket: true,\r\n    menus: ['shareAppMessage', 'shareTimeline']\r\n  })\r\n  \r\n  // 设置分享内容\r\n  if (scene === 'session') {\r\n    // 分享给好友\r\n    uni.shareAppMessage({\r\n      title: shareTitle,\r\n      path: shareUrl,\r\n      imageUrl: shareImageUrl\r\n    })\r\n  } else if (scene === 'timeline') {\r\n    // 分享到朋友圈\r\n    uni.shareTimeline({\r\n      title: shareTitle,\r\n      imageUrl: shareImageUrl\r\n    })\r\n  }\r\n}\r\n\r\nconst generateSharePoster = async () => {\r\n  uni.showLoading({\r\n    title: '生成中...'\r\n  })\r\n  \r\n  try {\r\n    const shareUrl = `https://your-domain.com/pages/works/detail?id=${workId.value}`\r\n    const posterPath = await generatePoster({\r\n      imageUrl: work.value.imageUrl,\r\n      title: work.value.title || '我的AI作品',\r\n      shareUrl: shareUrl\r\n    })\r\n    \r\n    uni.hideLoading()\r\n    \r\n    // 预览海报\r\n    uni.previewImage({\r\n      urls: [posterPath],\r\n      current: posterPath\r\n    })\r\n  } catch (error) {\r\n    uni.hideLoading()\r\n    console.error('生成海报失败', error)\r\n    uni.showToast({\r\n      title: '生成失败',\r\n      icon: 'none'\r\n    })\r\n  }\r\n}\r\n\r\nconst saveSharePoster = async () => {\r\n  uni.showLoading({\r\n    title: '生成中...'\r\n  })\r\n  \r\n  try {\r\n    const shareUrl = `https://your-domain.com/pages/works/detail?id=${workId.value}`\r\n    const posterPath = await generatePoster({\r\n      imageUrl: work.value.imageUrl,\r\n      title: work.value.title || '我的AI作品',\r\n      shareUrl: shareUrl\r\n    })\r\n    \r\n    await savePosterToAlbum(posterPath)\r\n  } catch (error) {\r\n    console.error('保存海报失败', error)\r\n    uni.showToast({\r\n      title: '保存失败',\r\n      icon: 'none'\r\n    })\r\n  } finally {\r\n    uni.hideLoading()\r\n  }\r\n}\r\n\r\nconst formatTime = (timeStr) => {\r\n  if (!timeStr) return ''\r\n  const date = new Date(timeStr)\r\n  return date.toLocaleString('zh-CN')\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.detail-container {\r\n  min-height: 100vh;\r\n  background-color: #F8F8F8;\r\n}\r\n\r\n.image-section {\r\n  background: #ffffff;\r\n  padding: 40rpx;\r\n  margin-bottom: 20rpx;\r\n  \r\n  .work-image {\r\n    width: 100%;\r\n    min-height: 600rpx;\r\n    border-radius: 20rpx;\r\n  }\r\n}\r\n\r\n.info-section {\r\n  background: #ffffff;\r\n  padding: 40rpx;\r\n  margin-bottom: 20rpx;\r\n  \r\n  .work-title {\r\n    display: block;\r\n    font-size: 40rpx;\r\n    font-weight: bold;\r\n    color: #333333;\r\n    margin-bottom: 20rpx;\r\n  }\r\n  \r\n  .work-description {\r\n    display: block;\r\n    font-size: 28rpx;\r\n    color: #666666;\r\n    line-height: 1.6;\r\n    margin-bottom: 20rpx;\r\n  }\r\n  \r\n  .work-time {\r\n    display: block;\r\n    font-size: 24rpx;\r\n    color: #999999;\r\n  }\r\n  \r\n  .category-section {\r\n    margin: 30rpx 0;\r\n    padding-top: 30rpx;\r\n    border-top: 1rpx solid #E5E5E5;\r\n    \r\n    .category-title {\r\n      font-size: 28rpx;\r\n      font-weight: bold;\r\n      color: #333333;\r\n      margin-bottom: 20rpx;\r\n    }\r\n    \r\n    .category-content {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n      \r\n      .category-value {\r\n        font-size: 28rpx;\r\n        color: #333333;\r\n        padding: 10rpx 20rpx;\r\n        background: #F0F0F0;\r\n        border-radius: 20rpx;\r\n      }\r\n      \r\n      .category-placeholder {\r\n        font-size: 28rpx;\r\n        color: #999999;\r\n        font-style: italic;\r\n      }\r\n      \r\n      .category-edit-btn {\r\n        font-size: 26rpx;\r\n        color: #007AFF;\r\n        padding: 10rpx 20rpx;\r\n        background: #E8F4FD;\r\n        border-radius: 20rpx;\r\n      }\r\n    }\r\n  }\r\n  \r\n  .tags-section {\r\n    margin: 30rpx 0;\r\n    padding-top: 30rpx;\r\n    border-top: 1rpx solid #E5E5E5;\r\n    \r\n    .tags-title {\r\n      font-size: 28rpx;\r\n      font-weight: bold;\r\n      color: #333333;\r\n      margin-bottom: 20rpx;\r\n    }\r\n    \r\n    .tags-list {\r\n      display: flex;\r\n      flex-wrap: wrap;\r\n      gap: 15rpx;\r\n      margin-bottom: 20rpx;\r\n      \r\n      .tag-item {\r\n        display: inline-flex;\r\n        align-items: center;\r\n        padding: 8rpx 20rpx;\r\n        background: #F0F0F0;\r\n        border-radius: 20rpx;\r\n        font-size: 24rpx;\r\n        color: #666666;\r\n        \r\n        .tag-remove {\r\n          margin-left: 10rpx;\r\n          font-size: 32rpx;\r\n          color: #FF3B30;\r\n          font-weight: bold;\r\n        }\r\n        \r\n        &.add-tag {\r\n          background: #E8F4FD;\r\n          color: #007AFF;\r\n          border: 1rpx dashed #007AFF;\r\n        }\r\n      }\r\n    }\r\n    \r\n    .tags-actions {\r\n      .tags-edit-btn {\r\n        font-size: 26rpx;\r\n        color: #007AFF;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.action-section {\r\n  padding: 30rpx 40rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20rpx;\r\n  \r\n  .action-btn {\r\n    width: 100%;\r\n    height: 88rpx;\r\n    border-radius: 44rpx;\r\n    font-size: 32rpx;\r\n    font-weight: bold;\r\n    border: none;\r\n    \r\n    &.apply-btn {\r\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n      color: #ffffff;\r\n    }\r\n    \r\n    &.delete-btn {\r\n      background: #FF3B30;\r\n      color: #ffffff;\r\n    }\r\n    \r\n    &.favorite-btn {\r\n      background: #F5F5F5;\r\n      color: #666666;\r\n      \r\n      &.active {\r\n        background: linear-gradient(135deg, #FF9500 0%, #FF6B00 100%);\r\n        color: #ffffff;\r\n      }\r\n    }\r\n    \r\n    &.share-btn {\r\n      background: linear-gradient(135deg, #34C759 0%, #30D158 100%);\r\n      color: #ffffff;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n\r\n","import MiniProgramPage from 'D:/code/my-shop-cursor/frontend/pages/works/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onLoad","workApi","uni","onShow","generatePoster","savePosterToAlbum"],"mappings":"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"}