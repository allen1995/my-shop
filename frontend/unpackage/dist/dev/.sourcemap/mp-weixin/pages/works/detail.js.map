{"version":3,"file":"detail.js","sources":["pages/works/detail.vue","../../../software/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvd29ya3MvZGV0YWlsLnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"detail-container\">\r\n    <view class=\"image-section\">\r\n      <image class=\"work-image\" :src=\"work.imageUrl\" mode=\"aspectFit\" @click=\"previewImage\"></image>\r\n    </view>\r\n    \r\n    <view class=\"info-section\">\r\n      <text class=\"work-title\">{{ work.title }}</text>\r\n      <text class=\"work-description\" v-if=\"work.description\">{{ work.description }}</text>\r\n      <text class=\"work-time\">创建时间：{{ formatTime(work.createTime) }}</text>\r\n    </view>\r\n    \r\n    <view class=\"action-section\">\r\n      <button class=\"action-btn apply-btn\" @click=\"handleApply\">应用到包包</button>\r\n      <button class=\"action-btn delete-btn\" @click=\"handleDelete\">删除作品</button>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport { workApi } from '@/api/work'\r\nimport { onLoad } from '@dcloudio/uni-app'\r\n\r\nconst work = ref({})\r\nconst workId = ref(null)\r\n\r\nonLoad(async (options) => {\r\n  workId.value = options.id\r\n  await loadWorkDetail()\r\n})\r\n\r\nconst loadWorkDetail = async () => {\r\n  try {\r\n    const res = await workApi.getWorkDetail(workId.value)\r\n    if (res.code === 200 && res.data) {\r\n      work.value = res.data\r\n    }\r\n  } catch (error) {\r\n    console.error('加载作品详情失败', error)\r\n  }\r\n}\r\n\r\nconst previewImage = () => {\r\n  uni.previewImage({\r\n    urls: [work.value.imageUrl],\r\n    current: work.value.imageUrl\r\n  })\r\n}\r\n\r\nconst handleApply = () => {\r\n  uni.navigateTo({\r\n    url: `/pages/preview/preview?workId=${workId.value}&imageUrl=${encodeURIComponent(work.value.imageUrl)}`\r\n  })\r\n}\r\n\r\nconst handleDelete = () => {\r\n  uni.showModal({\r\n    title: '确认删除',\r\n    content: '确定要删除这个作品吗？',\r\n    success: async (res) => {\r\n      if (res.confirm) {\r\n        try {\r\n          const deleteRes = await workApi.deleteWork(workId.value)\r\n          if (deleteRes.code === 200) {\r\n            uni.showToast({\r\n              title: '删除成功',\r\n              icon: 'success'\r\n            })\r\n            \r\n            setTimeout(() => {\r\n              uni.navigateBack()\r\n            }, 1500)\r\n          }\r\n        } catch (error) {\r\n          uni.showToast({\r\n            title: '删除失败',\r\n            icon: 'none'\r\n          })\r\n        }\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nconst formatTime = (timeStr) => {\r\n  if (!timeStr) return ''\r\n  const date = new Date(timeStr)\r\n  return date.toLocaleString('zh-CN')\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.detail-container {\r\n  min-height: 100vh;\r\n  background-color: #F8F8F8;\r\n}\r\n\r\n.image-section {\r\n  background: #ffffff;\r\n  padding: 40rpx;\r\n  margin-bottom: 20rpx;\r\n  \r\n  .work-image {\r\n    width: 100%;\r\n    min-height: 600rpx;\r\n    border-radius: 20rpx;\r\n  }\r\n}\r\n\r\n.info-section {\r\n  background: #ffffff;\r\n  padding: 40rpx;\r\n  margin-bottom: 20rpx;\r\n  \r\n  .work-title {\r\n    display: block;\r\n    font-size: 40rpx;\r\n    font-weight: bold;\r\n    color: #333333;\r\n    margin-bottom: 20rpx;\r\n  }\r\n  \r\n  .work-description {\r\n    display: block;\r\n    font-size: 28rpx;\r\n    color: #666666;\r\n    line-height: 1.6;\r\n    margin-bottom: 20rpx;\r\n  }\r\n  \r\n  .work-time {\r\n    display: block;\r\n    font-size: 24rpx;\r\n    color: #999999;\r\n  }\r\n}\r\n\r\n.action-section {\r\n  padding: 30rpx 40rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20rpx;\r\n  \r\n  .action-btn {\r\n    width: 100%;\r\n    height: 88rpx;\r\n    border-radius: 44rpx;\r\n    font-size: 32rpx;\r\n    font-weight: bold;\r\n    border: none;\r\n    \r\n    &.apply-btn {\r\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n      color: #ffffff;\r\n    }\r\n    \r\n    &.delete-btn {\r\n      background: #FF3B30;\r\n      color: #ffffff;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n\r\n","import MiniProgramPage from 'D:/code/my-shop-cursor/frontend/pages/works/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onLoad","workApi","uni"],"mappings":";;;;;;AAwBA,UAAM,OAAOA,cAAG,IAAC,EAAE;AACnB,UAAM,SAASA,cAAG,IAAC,IAAI;AAEvBC,kBAAM,OAAC,OAAO,YAAY;AACxB,aAAO,QAAQ,QAAQ;AACvB,YAAM,eAAgB;AAAA,IACxB,CAAC;AAED,UAAM,iBAAiB,YAAY;AACjC,UAAI;AACF,cAAM,MAAM,MAAMC,SAAAA,QAAQ,cAAc,OAAO,KAAK;AACpD,YAAI,IAAI,SAAS,OAAO,IAAI,MAAM;AAChC,eAAK,QAAQ,IAAI;AAAA,QAClB;AAAA,MACF,SAAQ,OAAO;AACdC,sBAAAA,MAAA,MAAA,SAAA,gCAAc,YAAY,KAAK;AAAA,MAChC;AAAA,IACH;AAEA,UAAM,eAAe,MAAM;AACzBA,oBAAAA,MAAI,aAAa;AAAA,QACf,MAAM,CAAC,KAAK,MAAM,QAAQ;AAAA,QAC1B,SAAS,KAAK,MAAM;AAAA,MACxB,CAAG;AAAA,IACH;AAEA,UAAM,cAAc,MAAM;AACxBA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,iCAAiC,OAAO,KAAK,aAAa,mBAAmB,KAAK,MAAM,QAAQ,CAAC;AAAA,MAC1G,CAAG;AAAA,IACH;AAEA,UAAM,eAAe,MAAM;AACzBA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,OAAO,QAAQ;AACtB,cAAI,IAAI,SAAS;AACf,gBAAI;AACF,oBAAM,YAAY,MAAMD,SAAAA,QAAQ,WAAW,OAAO,KAAK;AACvD,kBAAI,UAAU,SAAS,KAAK;AAC1BC,8BAAAA,MAAI,UAAU;AAAA,kBACZ,OAAO;AAAA,kBACP,MAAM;AAAA,gBACpB,CAAa;AAED,2BAAW,MAAM;AACfA,gCAAAA,MAAI,aAAc;AAAA,gBACnB,GAAE,IAAI;AAAA,cACR;AAAA,YACF,SAAQ,OAAO;AACdA,4BAAAA,MAAI,UAAU;AAAA,gBACZ,OAAO;AAAA,gBACP,MAAM;AAAA,cAClB,CAAW;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACL,CAAG;AAAA,IACH;AAEA,UAAM,aAAa,CAAC,YAAY;AAC9B,UAAI,CAAC;AAAS,eAAO;AACrB,YAAM,OAAO,IAAI,KAAK,OAAO;AAC7B,aAAO,KAAK,eAAe,OAAO;AAAA,IACpC;;;;;;;;;;;;;;;;;;ACxFA,GAAG,WAAW,eAAe;"}