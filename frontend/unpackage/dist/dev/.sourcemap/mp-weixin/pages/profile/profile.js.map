{"version":3,"file":"profile.js","sources":["pages/profile/profile.vue","../../../software/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJvZmlsZS9wcm9maWxlLnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"profile-container\">\r\n    <view class=\"user-info-section\">\r\n      <image \r\n        class=\"avatar\" \r\n        :src=\"getAvatarUrl(userInfo.avatarUrl)\" \r\n        mode=\"aspectFill\"\r\n        @click=\"goToEditProfile\"\r\n        @error=\"handleAvatarError\"\r\n      ></image>\r\n      <text class=\"nickname\">{{ userInfo.nickName || 'Êú™ËÆæÁΩÆÊòµÁß∞' }}</text>\r\n      <text class=\"edit-btn\" @click=\"goToEditProfile\">ÁºñËæëËµÑÊñô</text>\r\n    </view>\r\n    \r\n    <view class=\"statistics-section\">\r\n      <view class=\"stat-item\" @click=\"goToOrders('PENDING_PAYMENT')\">\r\n        <text class=\"stat-value\">{{ statistics.orders?.pendingPayment || 0 }}</text>\r\n        <text class=\"stat-label\">ÂæÖÊîØ‰ªò</text>\r\n      </view>\r\n      <view class=\"stat-item\" @click=\"goToOrders('SHIPPED')\">\r\n        <text class=\"stat-value\">{{ statistics.orders?.shipped || 0 }}</text>\r\n        <text class=\"stat-label\">ÂæÖÊî∂Ë¥ß</text>\r\n      </view>\r\n      <view class=\"stat-item\" @click=\"goToOrders('COMPLETED')\">\r\n        <text class=\"stat-value\">{{ statistics.orders?.completed || 0 }}</text>\r\n        <text class=\"stat-label\">Â∑≤ÂÆåÊàê</text>\r\n      </view>\r\n      <view class=\"stat-item\" @click=\"goToWorks\">\r\n        <text class=\"stat-value\">{{ statistics.works?.total || 0 }}</text>\r\n        <text class=\"stat-label\">ÊàëÁöÑ‰ΩúÂìÅ</text>\r\n      </view>\r\n    </view>\r\n    \r\n    <view class=\"menu-section\">\r\n      <view class=\"menu-item\" @click=\"goToOrders()\">\r\n        <text class=\"menu-icon\">üì¶</text>\r\n        <text class=\"menu-title\">ÊàëÁöÑËÆ¢Âçï</text>\r\n        <text class=\"menu-arrow\">></text>\r\n      </view>\r\n      \r\n      <view class=\"menu-item\" @click=\"goToAddresses\">\r\n        <text class=\"menu-icon\">üìç</text>\r\n        <text class=\"menu-title\">Êî∂Ë¥ßÂú∞ÂùÄ</text>\r\n        <text class=\"menu-arrow\">></text>\r\n      </view>\r\n      \r\n      <view class=\"menu-item\" @click=\"goToWorks\">\r\n        <text class=\"menu-icon\">üé®</text>\r\n        <text class=\"menu-title\">ÊàëÁöÑ‰ΩúÂìÅ</text>\r\n        <text class=\"menu-arrow\">></text>\r\n      </view>\r\n      \r\n      <view class=\"menu-item\" @click=\"goToSettings\">\r\n        <text class=\"menu-icon\">‚öôÔ∏è</text>\r\n        <text class=\"menu-title\">ËÆæÁΩÆ</text>\r\n        <text class=\"menu-arrow\">></text>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport { useUserStore } from '@/store/user'\r\nimport { userApi } from '@/api/user'\r\nimport { onShow } from '@dcloudio/uni-app'\r\n\r\nconst userStore = useUserStore()\r\nconst userInfo = ref({})\r\nconst statistics = ref({\r\n  orders: {},\r\n  works: {}\r\n})\r\n\r\nconst loadUserInfo = async () => {\r\n  try {\r\n    const res = await userApi.getProfile()\r\n    if (res.code === 200 && res.data) {\r\n      userInfo.value = res.data\r\n      userStore.user = res.data\r\n    }\r\n  } catch (error) {\r\n    console.error('Âä†ËΩΩÁî®Êà∑‰ø°ÊÅØÂ§±Ë¥•', error)\r\n  }\r\n}\r\n\r\nconst loadStatistics = async () => {\r\n  try {\r\n    const res = await userApi.getStatistics()\r\n    if (res.code === 200 && res.data) {\r\n      statistics.value = res.data\r\n    }\r\n  } catch (error) {\r\n    console.error('Âä†ËΩΩÁªüËÆ°‰ø°ÊÅØÂ§±Ë¥•', error)\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  loadUserInfo()\r\n  loadStatistics()\r\n})\r\n\r\nonShow(() => {\r\n  loadUserInfo()\r\n  loadStatistics()\r\n})\r\n\r\nconst goToEditProfile = () => {\r\n  uni.navigateTo({\r\n    url: '/pages/profile/edit'\r\n  })\r\n}\r\n\r\nconst goToOrders = (status) => {\r\n  const url = status ? `/pages/order/list?status=${status}` : '/pages/order/list'\r\n  uni.navigateTo({\r\n    url: url\r\n  })\r\n}\r\n\r\nconst goToAddresses = () => {\r\n  uni.navigateTo({\r\n    url: '/pages/address/list'\r\n  })\r\n}\r\n\r\nconst goToWorks = () => {\r\n  uni.switchTab({\r\n    url: '/pages/works/list'\r\n  })\r\n}\r\n\r\nconst goToSettings = () => {\r\n  uni.showToast({\r\n    title: 'ËÆæÁΩÆÂäüËÉΩÂºÄÂèë‰∏≠',\r\n    icon: 'none'\r\n  })\r\n}\r\n\r\n// Ëé∑ÂèñÂ§¥ÂÉèURLÔºåËøáÊª§‰∏¥Êó∂Ë∑ØÂæÑ\r\nconst getAvatarUrl = (avatarUrl) => {\r\n  if (!avatarUrl) {\r\n    return '/static/default-avatar.png'\r\n  }\r\n  // Â¶ÇÊûúÊòØ‰∏¥Êó∂Ë∑ØÂæÑÔºà__tmp__ÔºâÔºå‰ΩøÁî®ÈªòËÆ§Â§¥ÂÉè\r\n  if (avatarUrl.includes('__tmp__') || avatarUrl.includes('127.0.0.1')) {\r\n    return '/static/default-avatar.png'\r\n  }\r\n  return avatarUrl\r\n}\r\n\r\n// Â§¥ÂÉèÂä†ËΩΩÈîôËØØÂ§ÑÁêÜ\r\nconst handleAvatarError = (e) => {\r\n  console.error('Â§¥ÂÉèÂä†ËΩΩÂ§±Ë¥•', e)\r\n  // Â¶ÇÊûúÂ§¥ÂÉèÂä†ËΩΩÂ§±Ë¥•Ôºå‰ΩøÁî®ÈªòËÆ§Â§¥ÂÉè\r\n  userInfo.value.avatarUrl = '/static/default-avatar.png'\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.profile-container {\r\n  min-height: 100vh;\r\n  background-color: #F8F8F8;\r\n}\r\n\r\n.user-info-section {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  padding: 80rpx 40rpx 60rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  position: relative;\r\n  \r\n  .avatar {\r\n    width: 160rpx;\r\n    height: 160rpx;\r\n    border-radius: 80rpx;\r\n    border: 4rpx solid #ffffff;\r\n    margin-bottom: 30rpx;\r\n  }\r\n  \r\n  .nickname {\r\n    font-size: 36rpx;\r\n    font-weight: bold;\r\n    color: #ffffff;\r\n    margin-bottom: 20rpx;\r\n  }\r\n  \r\n  .edit-btn {\r\n    font-size: 26rpx;\r\n    color: #ffffff;\r\n    padding: 10rpx 30rpx;\r\n    border: 1rpx solid rgba(255, 255, 255, 0.5);\r\n    border-radius: 30rpx;\r\n    background: rgba(255, 255, 255, 0.2);\r\n  }\r\n}\r\n\r\n.statistics-section {\r\n  background: #ffffff;\r\n  margin: 20rpx;\r\n  border-radius: 20rpx;\r\n  padding: 40rpx 20rpx;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.05);\r\n  \r\n  .stat-item {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    \r\n    .stat-value {\r\n      font-size: 48rpx;\r\n      font-weight: bold;\r\n      color: #667eea;\r\n      margin-bottom: 10rpx;\r\n    }\r\n    \r\n    .stat-label {\r\n      font-size: 24rpx;\r\n      color: #666666;\r\n    }\r\n  }\r\n}\r\n\r\n.menu-section {\r\n  margin-top: 20rpx;\r\n  background: #ffffff;\r\n  padding: 0 40rpx;\r\n  \r\n  .menu-item {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 40rpx 0;\r\n    border-bottom: 2rpx solid #F5F5F5;\r\n    \r\n    &:last-child {\r\n      border-bottom: none;\r\n    }\r\n    \r\n    .menu-icon {\r\n      font-size: 40rpx;\r\n      margin-right: 20rpx;\r\n    }\r\n    \r\n    .menu-title {\r\n      flex: 1;\r\n      font-size: 32rpx;\r\n      color: #333333;\r\n    }\r\n    \r\n    .menu-arrow {\r\n      font-size: 32rpx;\r\n      color: #999999;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n\r\n","import MiniProgramPage from 'D:/code/my-shop-cursor/frontend/pages/profile/profile.vue'\nwx.createPage(MiniProgramPage)"],"names":["useUserStore","ref","userApi","uni","onMounted","onShow"],"mappings":";;;;;;;AAmEA,UAAM,YAAYA,WAAAA,aAAc;AAChC,UAAM,WAAWC,cAAG,IAAC,EAAE;AACvB,UAAM,aAAaA,cAAAA,IAAI;AAAA,MACrB,QAAQ,CAAE;AAAA,MACV,OAAO,CAAE;AAAA,IACX,CAAC;AAED,UAAM,eAAe,YAAY;AAC/B,UAAI;AACF,cAAM,MAAM,MAAMC,SAAO,QAAC,WAAY;AACtC,YAAI,IAAI,SAAS,OAAO,IAAI,MAAM;AAChC,mBAAS,QAAQ,IAAI;AACrB,oBAAU,OAAO,IAAI;AAAA,QACtB;AAAA,MACF,SAAQ,OAAO;AACdC,sBAAAA,MAAA,MAAA,SAAA,mCAAc,YAAY,KAAK;AAAA,MAChC;AAAA,IACH;AAEA,UAAM,iBAAiB,YAAY;AACjC,UAAI;AACF,cAAM,MAAM,MAAMD,SAAO,QAAC,cAAe;AACzC,YAAI,IAAI,SAAS,OAAO,IAAI,MAAM;AAChC,qBAAW,QAAQ,IAAI;AAAA,QACxB;AAAA,MACF,SAAQ,OAAO;AACdC,sBAAAA,MAAA,MAAA,SAAA,mCAAc,YAAY,KAAK;AAAA,MAChC;AAAA,IACH;AAEAC,kBAAAA,UAAU,MAAM;AACd,mBAAc;AACd,qBAAgB;AAAA,IAClB,CAAC;AAEDC,kBAAAA,OAAO,MAAM;AACX,mBAAc;AACd,qBAAgB;AAAA,IAClB,CAAC;AAED,UAAM,kBAAkB,MAAM;AAC5BF,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MACT,CAAG;AAAA,IACH;AAEA,UAAM,aAAa,CAAC,WAAW;AAC7B,YAAM,MAAM,SAAS,4BAA4B,MAAM,KAAK;AAC5DA,oBAAAA,MAAI,WAAW;AAAA,QACb;AAAA,MACJ,CAAG;AAAA,IACH;AAEA,UAAM,gBAAgB,MAAM;AAC1BA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MACT,CAAG;AAAA,IACH;AAEA,UAAM,YAAY,MAAM;AACtBA,oBAAAA,MAAI,UAAU;AAAA,QACZ,KAAK;AAAA,MACT,CAAG;AAAA,IACH;AAEA,UAAM,eAAe,MAAM;AACzBA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,MAAM;AAAA,MACV,CAAG;AAAA,IACH;AAGA,UAAM,eAAe,CAAC,cAAc;AAClC,UAAI,CAAC,WAAW;AACd,eAAO;AAAA,MACR;AAED,UAAI,UAAU,SAAS,SAAS,KAAK,UAAU,SAAS,WAAW,GAAG;AACpE,eAAO;AAAA,MACR;AACD,aAAO;AAAA,IACT;AAGA,UAAM,oBAAoB,CAAC,MAAM;AAC/BA,oBAAAA,MAAA,MAAA,SAAA,oCAAc,UAAU,CAAC;AAEzB,eAAS,MAAM,YAAY;AAAA,IAC7B;;;;;;;;;;;;;;;;;;;;;;;;;;AC3JA,GAAG,WAAW,eAAe;"}