# Test Design: Story 9.5

Date: 2024-12-16
Designer: Quinn (Test Architect)

## Test Strategy Overview

- Total test scenarios: 14
- Unit tests: 1 (7%)
- Integration tests: 3 (21%)
- E2E tests: 10 (72%)
- Priority distribution: P0: 6, P1: 7, P2: 1

## Test Scenarios by Acceptance Criteria

### AC1: 地址管理页面已创建

#### Scenarios

| ID           | Level       | Priority | Test                      | Justification            |
| ------------ | ----------- | -------- | ------------------------- | ------------------------ |
| 9.5-E2E-001  | E2E         | P1       | 验证地址管理页面（列表页和编辑页）可访问 | 页面存在性验证 |

### AC2: 显示地址列表

#### Scenarios

| ID           | Level       | Priority | Test                      | Justification            |
| ------------ | ----------- | -------- | ------------------------- | ------------------------ |
| 9.5-INT-001  | Integration | P0       | 验证前端API调用获取地址列表 | API集成验证 |
| 9.5-E2E-002  | E2E         | P0       | 验证地址列表正确显示收货人、手机号、完整地址 | UI显示验证 |
| 9.5-E2E-003  | E2E         | P0       | 验证地址列表正确显示默认地址标识 | UI显示验证 |

### AC3: 支持添加、编辑、删除地址

#### Scenarios

| ID           | Level       | Priority | Test                      | Justification            |
| ------------ | ----------- | -------- | ------------------------- | ------------------------ |
| 9.5-INT-002  | Integration | P0       | 验证前端API调用创建、更新、删除地址 | API集成验证 |
| 9.5-E2E-004  | E2E         | P0       | 验证用户添加地址功能 | 用户交互验证 |
| 9.5-E2E-005  | E2E         | P0       | 验证用户编辑地址功能 | 用户交互验证 |
| 9.5-E2E-006  | E2E         | P0       | 验证用户删除地址功能 | 用户交互验证 |
| 9.5-E2E-007  | E2E         | P1       | 验证删除地址确认提示 | UI交互验证 |

### AC4: 支持设置默认地址

#### Scenarios

| ID           | Level       | Priority | Test                      | Justification            |
| ------------ | ----------- | -------- | ------------------------- | ------------------------ |
| 9.5-INT-003  | Integration | P0       | 验证前端API调用设置默认地址 | API集成验证 |
| 9.5-E2E-008  | E2E         | P0       | 验证用户设置默认地址功能 | 用户交互验证 |
| 9.5-E2E-009  | E2E         | P1       | 验证设置新默认地址后旧默认地址标识清除 | UI状态同步验证 |

### AC5: 地址选择器已实现（省市区选择）

#### Scenarios

| ID           | Level       | Priority | Test                      | Justification            |
| ------------ | ----------- | -------- | ------------------------- | ------------------------ |
| 9.5-UNIT-001 | Unit        | P1       | 验证省市区选择器数据格式 | 数据格式验证 |
| 9.5-E2E-010  | E2E         | P1       | 验证用户使用省市区选择器选择地址 | 用户交互验证 |

### AC6: 页面UI美观，符合设计规范

#### Scenarios

| ID           | Level       | Priority | Test                      | Justification            |
| ------------ | ----------- | -------- | ------------------------- | ------------------------ |
| 9.5-E2E-011  | E2E         | P1       | 验证页面UI样式符合设计规范（卡片式设计、默认地址标识、操作按钮） | UI视觉验证 |
| 9.5-E2E-012  | E2E         | P2       | 验证页面响应式布局（不同屏幕尺寸） | UI适配验证 |

## Risk Coverage

- 用户体验风险：通过E2E测试验证地址管理完整流程
- 数据完整性风险：通过INT测试验证API调用正确性

## Recommended Execution Order

1. P0 Unit tests (fail fast)
   - (无P0单元测试)
2. P0 Integration tests
   - 9.5-INT-001: 前端API调用获取地址列表
   - 9.5-INT-002: 前端API调用CRUD操作
   - 9.5-INT-003: 前端API调用设置默认地址
3. P0 E2E tests
   - 9.5-E2E-002: 地址列表显示
   - 9.5-E2E-003: 默认地址标识显示
   - 9.5-E2E-004: 添加地址功能
   - 9.5-E2E-005: 编辑地址功能
   - 9.5-E2E-006: 删除地址功能
   - 9.5-E2E-008: 设置默认地址功能
4. P1 tests in order
   - 9.5-UNIT-001: 省市区选择器数据格式
   - 9.5-E2E-001: 页面可访问性
   - 9.5-E2E-007: 删除地址确认提示
   - 9.5-E2E-009: 默认地址状态同步
   - 9.5-E2E-010: 省市区选择器交互
   - 9.5-E2E-011: UI样式验证
5. P2+ as time permits
   - 9.5-E2E-012: 响应式布局验证

## Coverage Gaps

无 - 所有验收标准都有测试覆盖

