# Story 5.12: 前端购物车页面

## Status

Draft

## Story

**As a** user,
**I want** to view and manage my cart on the frontend,
**so that** I can review items before checkout.

## Acceptance Criteria

1. 购物车页面已创建
2. 显示所有购物车项，包含作品预览图、商品信息、规格、数量、价格
3. 支持修改数量（+/-按钮）
4. 支持删除购物车项（滑动删除或点击删除）
5. 显示总价
6. "去结算"按钮已实现
7. 空状态提示已实现
8. 页面UI美观，符合设计规范

## Tasks / Subtasks

- [ ] Task 1: 创建购物车页面 (AC: 1, 8)
  - [ ] 创建pages/cart/cart.vue页面
  - [ ] 配置页面路由
  - [ ] 设计页面布局和样式
- [ ] Task 2: 实现购物车列表显示 (AC: 2)
  - [ ] 调用cartApi.getCartItems获取购物车列表
  - [ ] 显示购物车项列表
  - [ ] 显示作品预览图
  - [ ] 显示商品信息、规格、数量、价格
  - [ ] 添加加载状态
- [ ] Task 3: 实现数量修改功能 (AC: 3)
  - [ ] 添加+/-按钮
  - [ ] 实现增加数量功能
  - [ ] 实现减少数量功能
  - [ ] 调用cartApi.updateCartItem更新数量
  - [ ] 更新本地状态
- [ ] Task 4: 实现删除功能 (AC: 4)
  - [ ] 添加删除按钮
  - [ ] 实现删除确认提示
  - [ ] 调用cartApi.deleteCartItem删除
  - [ ] 更新本地状态
- [ ] Task 5: 实现总价计算和结算 (AC: 5, 6)
  - [ ] 计算购物车总价
  - [ ] 显示总价
  - [ ] 实现"去结算"按钮
  - [ ] 跳转到订单确认页面
  - [ ] 传递选中的购物车项ID
- [ ] Task 6: 实现空状态 (AC: 7)
  - [ ] 检测购物车为空
  - [ ] 显示空状态提示
  - [ ] 添加"去逛逛"按钮
- [ ] Task 7: 实现数据刷新 (AC: 2)
  - [ ] 在onShow生命周期中刷新数据
  - [ ] 支持下拉刷新

## Dev Notes

### Previous Story Insights

依赖Story 5.3（购物车列表查询API）、Story 5.4（更新购物车项API）、Story 5.5（删除购物车项API）完成，确保相关API已实现。

### Data Models

使用后端返回的购物车项数据：
- CartItem: { id, workId, workTitle, workImageUrl, productId, productName, productPrice, color, size, quantity, previewImageUrl, subtotal }

[Source: docs/fullstack-architecture.md#CartItem（购物车项）]

### API Specifications

使用以下API：
- GET /api/cart/items - 获取购物车列表
- PUT /api/cart/items/{itemId} - 更新购物车项
- DELETE /api/cart/items/{itemId} - 删除购物车项

[Source: docs/fullstack-architecture.md#API Specification]

### File Locations

**前端文件位置：**
```
frontend/
├── pages/
│   └── cart/
│       └── cart.vue                  # 购物车页面
└── api/
    └── cart.js                       # 购物车API（已存在）
```

[Source: docs/fullstack-architecture.md#Frontend Structure]

### Technical Constraints

- **框架**: uni-app (Vue 3 Composition API)
- **状态管理**: 使用Pinia或本地状态
- **生命周期**: 使用onShow确保从其他页面返回时刷新数据
- **UI组件**: 使用uni-app组件（checkbox、button等）

[Source: docs/fullstack-architecture.md#Tech Stack]

### Testing Requirements

- 手动测试购物车页面功能
- 测试添加、修改、删除购物车项
- 测试总价计算
- 测试跳转到订单确认页面

[Source: docs/fullstack-architecture.md#Tech Stack]

## Testing

### Test File Location

由于是前端页面，主要进行手动测试。

### Test Standards

- 在微信开发者工具中测试
- 测试各种交互场景
- 验证UI显示正确

### Test Scenarios

1. **购物车列表显示测试**
   - 打开购物车页面
   - 验证购物车项正确显示
   - 验证作品预览图、商品信息、规格、数量、价格正确显示

2. **数量修改测试**
   - 点击+按钮增加数量
   - 点击-按钮减少数量
   - 验证数量更新正确
   - 验证总价更新正确

3. **删除功能测试**
   - 点击删除按钮
   - 确认删除
   - 验证购物车项被删除
   - 验证总价更新正确

4. **去结算测试**
   - 点击"去结算"按钮
   - 验证跳转到订单确认页面
   - 验证选中的购物车项正确传递

5. **空状态测试**
   - 清空购物车
   - 验证显示空状态提示
   - 验证"去逛逛"按钮可用

### Success Criteria

- 购物车页面能够正常显示
- 所有功能正常工作
- UI美观，符合设计规范
- 用户体验良好

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2024-12-15 | 1.0 | 初始故事创建 | Scrum Master |

## Dev Agent Record

### Agent Model Used

_To be filled by Dev Agent_

### Debug Log References

_To be filled by Dev Agent_

### Completion Notes List

_To be filled by Dev Agent_

### File List

_To be filled by Dev Agent_

## QA Results

_To be filled by QA Agent_

