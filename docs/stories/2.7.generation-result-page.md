# Story 2.7: 生成结果展示页面

## Status

Draft

## Story

**As a** user,
**I want** to view the generated image result,
**so that** I can decide whether to save it to my collection.

## Acceptance Criteria

1. 生成结果页面已创建
2. 大图展示生成的图片，支持缩放查看
3. "保存到作品集"按钮已实现
4. 支持重新生成功能
5. 页面UI美观，符合设计规范

## Tasks / Subtasks

- [ ] Task 1: 创建生成结果页面 (AC: 1)
  - [ ] 创建pages/generate/result.vue
  - [ ] 设计页面布局
- [ ] Task 2: 实现图片展示 (AC: 2)
  - [ ] 添加图片组件（使用uView UI的u-image）
  - [ ] 支持图片缩放查看（使用uni.previewImage）
  - [ ] 优化图片加载和显示
- [ ] Task 3: 实现保存到作品集功能 (AC: 3)
  - [ ] 添加"保存到作品集"按钮
  - [ ] 点击后弹出输入框（作品标题、描述）
  - [ ] 调用后端/api/works接口保存作品
  - [ ] 保存成功后显示提示
  - [ ] 可选：跳转到作品详情页
- [ ] Task 4: 实现重新生成功能 (AC: 4)
  - [ ] 添加"重新生成"按钮
  - [ ] 点击后返回文生图页面
  - [ ] 可选：保留之前的参数
- [ ] Task 5: 优化UI和用户体验 (AC: 5)
  - [ ] 优化页面布局和样式
  - [ ] 添加加载状态
  - [ ] 添加错误处理
  - [ ] 确保符合设计规范

## Dev Notes

### Previous Story Insights

依赖Story 2.6（生成进度显示页面）完成，能够接收resultUrl参数。同时依赖Story 3.2（保存作品API接口）完成，确保保存作品接口可用（如果Story 3.2未完成，可以先实现前端UI，后端接口后续实现）。

### Data Models

**页面参数：**
- resultUrl: string - 生成的图片URL

**保存作品请求：**
```typescript
interface SaveWorkRequest {
  title: string;
  description?: string;
  imageUrl: string;
  tags?: string[];
}
```

[Source: docs/fullstack-architecture.md#API Specification]

### API Specifications

**POST /api/works**
- 描述：保存作品
- 请求体：`{ title: string, description?: string, imageUrl: string, tags?: string[] }`
- 响应：`{ work: Work }`

前端需要：
- 收集用户输入的作品信息
- 调用保存接口
- 处理保存结果

[Source: docs/fullstack-architecture.md#API Specification]

### File Locations

**前端文件位置：**
```
frontend/
├── pages/
│   └── generate/
│       └── result.vue                # 生成结果页面
└── api/
    └── work.js                      # 作品API封装（如未创建）
```

[Source: docs/fullstack-architecture.md#Repository Structure]

### Technical Constraints

- **图片预览**: 使用uni.previewImage实现图片缩放查看
- **表单输入**: 使用uView UI的u-input、u-textarea组件
- **导航**: 使用uni.navigateTo或uni.switchTab进行页面跳转
- **图片加载**: 优化大图加载性能

[Source: docs/fullstack-architecture.md#Tech Stack]

### Testing Requirements

前端测试暂不实施，主要进行手动验证：
- 验证图片显示
- 验证保存功能
- 验证重新生成功能

[Source: docs/fullstack-architecture.md#Tech Stack]

## Testing

### Test File Location

前端测试暂不实施，后续添加。

### Test Standards

当前阶段主要进行手动验证：
- 在微信开发者工具中测试结果页面
- 验证图片显示和缩放
- 验证保存功能

### Test Scenarios

1. **图片显示测试**
   - 进入结果页面
   - 验证图片能够正常显示
   - 验证图片缩放功能

2. **保存到作品集测试**
   - 点击"保存到作品集"按钮
   - 输入作品标题和描述
   - 验证保存成功
   - 验证提示信息显示

3. **重新生成测试**
   - 点击"重新生成"按钮
   - 验证返回文生图页面

### Success Criteria

- 生成结果页面能够正常显示
- 图片显示和缩放功能正常
- 保存到作品集功能正常
- 重新生成功能正常
- 页面UI美观

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2024-12-15 | 1.0 | 初始故事创建 | Scrum Master |

## Dev Agent Record

### Agent Model Used

_To be filled by Dev Agent_

### Debug Log References

_To be filled by Dev Agent_

### Completion Notes List

_To be filled by Dev Agent_

### File List

_To be filled by Dev Agent_

## QA Results

_To be filled by QA Agent_

