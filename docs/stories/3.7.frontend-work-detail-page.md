# Story 3.7: 前端作品详情页面

## Status

Draft

## Story

**As a** user,
**I want** to view work details on the frontend,
**so that** I can see all information and take actions.

## Acceptance Criteria

1. 作品详情页面已创建
2. 大图展示作品图片，支持缩放查看
3. 显示作品标题、描述、标签等信息
4. "删除作品"按钮已实现，带确认提示
5. "应用到包包"按钮已实现，跳转到预览页
6. 页面UI美观，符合设计规范

## Tasks / Subtasks

- [ ] Task 1: 创建作品详情页面 (AC: 1)
  - [ ] 创建pages/works/detail.vue
  - [ ] 设计页面布局
- [ ] Task 2: 实现图片展示 (AC: 2)
  - [ ] 添加大图展示（使用uView UI的u-image）
  - [ ] 支持图片缩放查看（使用uni.previewImage）
  - [ ] 优化图片加载和显示
- [ ] Task 3: 实现作品信息显示 (AC: 3)
  - [ ] 显示作品标题
  - [ ] 显示作品描述（如果有）
  - [ ] 显示作品标签（如果有）
  - [ ] 显示创建时间
- [ ] Task 4: 实现删除作品功能 (AC: 4)
  - [ ] 添加"删除作品"按钮
  - [ ] 点击后弹出确认对话框（使用uni.showModal）
  - [ ] 确认后调用后端DELETE /api/works/{workId}接口
  - [ ] 删除成功后显示提示并返回作品列表页
  - [ ] 处理删除失败情况
- [ ] Task 5: 实现应用到包包功能 (AC: 5)
  - [ ] 添加"应用到包包"按钮
  - [ ] 点击后跳转到预览页（pages/preview/preview）
  - [ ] 传递workId和imageUrl参数
- [ ] Task 6: 实现作品详情加载 (AC: 3)
  - [ ] 在onLoad中接收workId参数
  - [ ] 调用后端/api/works/{workId}接口
  - [ ] 加载作品详情数据
  - [ ] 处理加载失败情况
- [ ] Task 7: 优化UI和用户体验 (AC: 6)
  - [ ] 优化页面布局和样式
  - [ ] 添加加载状态
  - [ ] 添加错误处理
  - [ ] 确保符合设计规范
- [ ] Task 8: 创建API封装 (AC: 4)
  - [ ] 在api/work.js中创建getWorkDetail和deleteWork方法
  - [ ] 封装作品详情查询和删除接口

## Dev Notes

### Previous Story Insights

依赖Story 3.4（作品详情查询API）和Story 3.5（删除作品API）完成，确保后端接口可用。同时依赖Story 3.6（前端作品集页面）完成，能够从列表页跳转过来。

### Data Models

**作品详情响应：**
```typescript
interface Work {
  id: number;
  userId: number;
  title: string;
  description?: string;
  imageUrl: string;
  tags?: string[];
  createTime: string;
  updateTime: string;
}
```

[Source: docs/fullstack-architecture.md#Work（作品）]

### API Specifications

**GET /api/works/{workId}**
- 响应：`{ work: Work }`

**DELETE /api/works/{workId}**
- 响应：`{ success: boolean }`

前端需要：
- 加载作品详情
- 实现删除功能
- 跳转到预览页

[Source: docs/fullstack-architecture.md#API Specification]

### File Locations

**前端文件位置：**
```
frontend/
├── pages/
│   └── works/
│       └── detail.vue                # 作品详情页面
└── api/
    └── work.js                       # 作品API封装（更新）
```

[Source: docs/fullstack-architecture.md#Repository Structure]

### Technical Constraints

- **图片预览**: 使用uni.previewImage实现图片缩放查看
- **确认对话框**: 使用uni.showModal
- **导航**: 使用uni.navigateTo跳转到预览页，uni.navigateBack返回列表页
- **错误处理**: 完善的错误提示和处理

[Source: docs/fullstack-architecture.md#Tech Stack]

### Testing Requirements

前端测试暂不实施，主要进行手动验证：
- 验证页面显示
- 验证删除功能
- 验证跳转功能

[Source: docs/fullstack-architecture.md#Tech Stack]

## Testing

### Test File Location

前端测试暂不实施，后续添加。

### Test Standards

当前阶段主要进行手动验证：
- 在微信开发者工具中测试页面功能
- 验证删除功能
- 验证跳转功能

### Test Scenarios

1. **页面显示测试**
   - 进入作品详情页
   - 验证作品信息显示正确
   - 验证图片能够正常显示和缩放

2. **删除作品测试**
   - 点击"删除作品"按钮
   - 验证确认对话框显示
   - 确认删除
   - 验证删除成功
   - 验证返回作品列表页

3. **应用到包包测试**
   - 点击"应用到包包"按钮
   - 验证跳转到预览页
   - 验证传递workId和imageUrl参数

### Success Criteria

- 作品详情页面能够正常显示
- 作品信息显示完整
- 删除功能正常
- 应用到包包功能正常
- 页面UI美观

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2024-12-15 | 1.0 | 初始故事创建 | Scrum Master |

## Dev Agent Record

### Agent Model Used

_To be filled by Dev Agent_

### Debug Log References

_To be filled by Dev Agent_

### Completion Notes List

_To be filled by Dev Agent_

### File List

_To be filled by Dev Agent_

## QA Results

_To be filled by QA Agent_

