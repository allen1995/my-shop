# Story 1.1: 后端项目初始化

## Status

Draft

## Story

**As a** developer,
**I want** to set up the Spring Boot project with H2 database,
**so that** I have a working backend foundation for the application.

## Acceptance Criteria

1. Spring Boot项目已创建，版本为3.0+
2. H2数据库已配置，支持内存模式和文件模式
3. 项目结构符合标准Spring Boot项目规范
4. 基础依赖已配置（Spring Web、Spring Data JPA、H2等）
5. 应用能够成功启动并连接到H2数据库
6. 提供健康检查接口 `/api/health` 返回200状态码

## Tasks / Subtasks

- [ ] Task 1: 创建Spring Boot项目结构 (AC: 1, 3)
  - [ ] 创建Maven项目，配置pom.xml
  - [ ] 设置Spring Boot版本为3.0+
  - [ ] 创建标准包结构：com.myshop.controller, service, repository, entity, dto, config, util
  - [ ] 创建主应用类（@SpringBootApplication）
- [ ] Task 2: 配置H2数据库 (AC: 2, 5)
  - [ ] 在pom.xml中添加H2依赖
  - [ ] 在application.yml中配置H2数据库连接
  - [ ] 配置数据库文件模式（file:./data/shopdb）
  - [ ] 配置JPA自动创建表功能
- [ ] Task 3: 添加基础依赖 (AC: 4)
  - [ ] 添加Spring Web依赖（RESTful API支持）
  - [ ] 添加Spring Data JPA依赖（数据访问）
  - [ ] 添加H2数据库驱动
  - [ ] 添加Lombok依赖（简化代码）
  - [ ] 添加Jackson依赖（JSON处理）
- [ ] Task 4: 创建健康检查接口 (AC: 6)
  - [ ] 创建HealthController
  - [ ] 实现GET /api/health接口
  - [ ] 返回200状态码和健康状态信息
- [ ] Task 5: 配置应用属性 (AC: 1, 2, 5)
  - [ ] 创建application.yml配置文件
  - [ ] 配置服务器端口（8080）
  - [ ] 配置API路径前缀（/api）
  - [ ] 配置JPA和Hibernate属性
  - [ ] 配置日志级别
- [ ] Task 6: 验证项目启动 (AC: 5)
  - [ ] 启动Spring Boot应用
  - [ ] 验证应用成功启动
  - [ ] 验证数据库连接成功
  - [ ] 测试健康检查接口

## Dev Notes

### Previous Story Insights

这是项目的第一个故事，没有前置故事。

### Data Models

本项目使用JPA实体类，数据模型定义在 `backend/src/main/java/com/myshop/entity/` 目录下。

[Source: docs/fullstack-architecture.md#Data Models]

### API Specifications

健康检查接口：
- **GET /api/health**
- 无需认证
- 返回200状态码和健康状态信息

[Source: docs/fullstack-architecture.md#API Specification]

### File Locations

基于项目结构，需要创建以下文件：

**后端项目结构：**
```
backend/
├── pom.xml                                    # Maven配置文件
├── src/
│   └── main/
│       ├── java/com/myshop/
│       │   ├── MyShopApplication.java        # 主应用类
│       │   ├── controller/
│       │   │   └── HealthController.java     # 健康检查控制器
│       │   ├── config/                       # 配置类目录（后续使用）
│       │   ├── service/                      # 服务层目录（后续使用）
│       │   ├── repository/                   # 数据访问层目录（后续使用）
│       │   ├── entity/                       # 实体类目录（后续使用）
│       │   ├── dto/                          # DTO目录（后续使用）
│       │   └── util/                         # 工具类目录（后续使用）
│       └── resources/
│           ├── application.yml               # 应用配置文件
│           └── application-dev.yml          # 开发环境配置（可选）
```

[Source: docs/fullstack-architecture.md#Repository Structure]

### Technical Constraints

- **Spring Boot版本**: 3.0+（使用Java 17+）
- **数据库**: H2 2.x（开发环境）
- **构建工具**: Maven 3.8+
- **API路径前缀**: `/api`

[Source: docs/fullstack-architecture.md#Tech Stack]

### Testing Requirements

- 使用JUnit 5进行单元测试
- 测试文件位置：`backend/src/test/java/com/myshop/`
- 测试健康检查接口返回200状态码
- 验证应用能够成功启动

[Source: docs/fullstack-architecture.md#Tech Stack]

## Testing

### Test File Location

测试文件应创建在：`backend/src/test/java/com/myshop/controller/HealthControllerTest.java`

### Test Standards

- 使用JUnit 5和Spring Boot Test
- 使用@SpringBootTest进行集成测试
- 使用MockMvc测试REST接口

### Test Scenarios

1. **健康检查接口测试**
   - 测试GET /api/health返回200状态码
   - 验证响应体包含健康状态信息

2. **应用启动测试**
   - 验证Spring Boot应用能够成功启动
   - 验证H2数据库连接成功

### Success Criteria

- 应用能够成功启动
- 健康检查接口返回200状态码
- 数据库连接正常
- 所有测试通过

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2024-12-15 | 1.0 | 初始故事创建 | Scrum Master |

## Dev Agent Record

### Agent Model Used

_To be filled by Dev Agent_

### Debug Log References

_To be filled by Dev Agent_

### Completion Notes List

_To be filled by Dev Agent_

### File List

_To be filled by Dev Agent_

## QA Results

_To be filled by QA Agent_

