# Story 7.1: 作品分类功能

## Status
Ready for Review

## Story
As a user,
I want to organize my works into categories,
so that I can find them more easily.

## Acceptance Criteria
1. 作品实体添加category字段
2. 后端提供 `/api/works/{workId}/category` PUT接口更新分类
3. 作品列表API支持按分类筛选
4. 前端作品集页面支持分类选择
5. 支持自定义分类名称

## Tasks / Subtasks
- [x] Task 1: 更新作品实体，确保category字段存在 (AC: 1)
- [x] Task 2: 实现更新分类的PUT接口 (AC: 2)
- [x] Task 3: 更新作品列表API支持分类筛选 (AC: 3)
- [x] Task 4: 前端实现分类选择功能 (AC: 4)
- [x] Task 5: 前端支持自定义分类名称 (AC: 5)

## Dev Notes
### Relevant Source Tree
- backend/src/main/java/com/myshop/entity/Work.java
- backend/src/main/java/com/myshop/controller/WorkController.java
- backend/src/main/java/com/myshop/repository/WorkRepository.java
- frontend/pages/works/list.vue

### Testing
- Test file location: backend/src/test/java/com/myshop/controller/WorkControllerTest.java
- Test standards: 单元测试覆盖所有接口，验证分类筛选功能

## Dev Agent Record
### Agent Model Used
Auto (Cursor AI)

### Debug Log References
- None

### Completion Notes
- Task 1: Work实体已有category字段，无需修改
- Task 2: 实现了PUT `/api/works/{workId}/category`接口，支持更新作品分类
- Task 3: 更新了GET `/api/works`接口，支持category查询参数进行筛选
- Task 4: 前端作品列表页面添加了分类选择标签页，支持按分类筛选
- Task 5: 前端支持通过弹窗添加自定义分类名称

### File List
- backend/src/main/java/com/myshop/controller/WorkController.java (修改：添加更新分类接口，更新列表接口支持分类筛选)
- backend/src/main/java/com/myshop/repository/WorkRepository.java (已有分类查询方法)
- frontend/api/work.js (修改：添加updateCategory方法)
- frontend/pages/works/list.vue (修改：添加分类选择UI和功能)

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2024-12-14 | 1.0 | Story created | Dev Agent |
| 2024-12-14 | 1.1 | Story 7.1 implementation completed | Dev Agent |

## QA Results

### Gate Status

Gate: CONCERNS → docs/qa/gates/7.1-work-category.yml

